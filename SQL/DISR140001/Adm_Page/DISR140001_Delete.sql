DECLARE @@CNT INT
	, @@CHK VARCHAR(20)
	, @@ERR VARCHAR(MAX);
DECLARE @@MSG_TEXT VARCHAR(MAX);
DECLARE @@MSG_TYPE VARCHAR(MAX);

BEGIN TRY
	SET @@CNT = (SELECT COUNT(1) FROM Z_REX_Data_InOut_FG_New WHERE ID_TRANS = @BUNDLE_CODE);
		IF(@@CNT > 0)
		BEGIN
			IF(@typeFunction = 'UPDATE')
			BEGIN
				DELETE  Z_REX_Data_InOut_FG_Detail 
				WHERE ID_TRANS = @BUNDLE_CODE AND SERIAL_NO = @SERIAL;
			END 
			ELSE IF(@typeFunction = 'DELETE')
			BEGIN
				DELETE Z_REX_Data_InOut_FG_New
				WHERE ID_TRANS = @BUNDLE_CODE;
		
				DELETE  Z_REX_Data_InOut_FG_Detail 
				WHERE ID_TRANS = @BUNDLE_CODE;
			END

			SET @@CHK = 'TRUE';
			SET @@ERR = 'NOTHING';

		END ELSE
		BEGIN
			SET @@CHK = 'FALSE';
			SET @@ERR = 'ERROR DELETE DATA, BUNDLE UNAVAILABLE!';
		END
	
END TRY
BEGIN CATCH
	SET @@CHK = 'FALSE';
	SET @@ERR = 'ERROR INSERT BUNDLE:' +@BUNDLE_CODE+
	'<br/>Detail Error :|: ' + ERROR_MESSAGE() + ' :|: ';	
END CATCH

SELECT @@CHK AS STACK, @@ERR AS LINE_STS,CAST(@@CNT AS VARCHAR(20)) AS BUNDLE_CODE