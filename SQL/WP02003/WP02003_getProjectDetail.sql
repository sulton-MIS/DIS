--SELECT A.ID,A.PROJECT_CODE,A.PROJECT_NAME , B.AREA_NAME,
--A.IMPLEMENT_DATE_FROM, A.IMPLEMENT_DATE_TO ,
--D.ID_TB_M_COMPANY , F.COMPANY_NAME
--FROM TB_R_WP_PROJECT A
--INNER JOIN TB_M_AREA B ON A.ID_TB_M_AREA = B.ID_TB_M_AREA
--INNER JOIN ( SELECT DISTINCT B.ID_TB_M_COMPANY,B.WP_PROJECT_JOB_ID FROM TB_R_WP_PROJECT_JOB  A 
--INNER JOIN TB_R_WP_DETAIL_IMPLEMENTOR B
--ON A.ID = B.WP_PROJECT_JOB_ID) AS D ON A.ID = D.WP_PROJECT_JOB_ID
--INNER JOIN TB_M_COMPANY F ON D.ID_TB_M_COMPANY = F.ID_TB_M_COMPANY WHERE A.ID = @ID;
SELECT TOP 1 A.ID,A.PROJECT_CODE,A.PROJECT_NAME , 
B.AREA_NAME,
B.IMAGE_PATH AS AREA_PATH,
G.LOC_NAME AS LOCATION_NAME,
A.IMPLEMENT_DATE_FROM, A.IMPLEMENT_DATE_TO ,
D.ID_TB_M_COMPANY , F.COMPANY_NAME
FROM TB_R_WP_PROJECT A
INNER JOIN TB_M_AREA B ON A.ID_TB_M_AREA = B.ID_TB_M_AREA
INNER JOIN TB_M_LOCATION G ON G.ID_TB_M_AREA = B.ID_TB_M_AREA
INNER JOIN TB_R_WP_PROJECT_JOB C ON C.WP_PROJECT_ID = A.ID
INNER JOIN TB_R_WP_DETAIL_IMPLEMENTOR D ON D.WP_PROJECT_JOB_ID = C.ID
INNER JOIN TB_M_COMPANY F ON D.ID_TB_M_COMPANY = F.ID_TB_M_COMPANY 
WHERE A.ID = @ID;
