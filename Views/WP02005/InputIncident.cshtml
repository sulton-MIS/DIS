@using AI070.Models;
@using AI070.Models.Shared;
@using AI070.Models.WP02002Master;
@{
    List<EmployeeModel> Employee = (List<EmployeeModel>)ViewData["Employee"];
    List<AreaModel> Areas = (List<AreaModel>)ViewData["Area"];
}
    <div class="row">
        <div class="col-lg-6">
            <label class="section-title">
                <u>Incident</u>
            </label>
        </div>
        <div class="col-lg-6">
            <div class="row">
                <div class="col-lg-12">
                    <button type="button" class="btn btn-primary btn-xs pull-right" id="WP02005_BTN_ADD_SHOW_INCIDENT" style="width: 80px;"><i class="fa fa-plus"></i> Add</button>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="row space-bottom">
            <div class="table-responsive col-xs-12 col-sm-12" style="overflow: hidden;" id="GridTable">
                <div style="border: 1px solid #ccc; overflow:scroll; position: relative;">
                    <div id="gutterGrid" style="position: absolute; display: block; top: 0; right: 0; width: 17px; height: auto; border-left: 0px solid #ddd; border-top: 1px solid #ddd; border-bottom: 1px solid #ddd; background: rgb(241, 241, 241);"></div>
                    <div id="tScrollHead" style="width: 100%; border-right:1px solid #fff">
                        <table id="dynamic-table" class="table table-striped table-bordered table-condensed table-fixed" style="min-width: 100%; table-layout: fixed">
                            <thead>
                                <tr>
                                    <th style="width: 20%;">Incident Title</th>
                                    <th style="width: 10%;">PIC</th>
                                    <th style="width: 10%;">Area</th>
                                    <th style="width: 10%;">Date</th>
                                    <th style="width: 10%;">Level</th>
                                    <th style="width: 10%">Evidence</th>
                                    <th style="width: 10%;">Reported By</th>
                                    <th style="width: 10%;">Action / Prosecution</th>
                                    <th style="width: 10%;"></th>
                                </tr>
                            </thead>
                        </table>
                    </div>

                    <!--data grid-->
                    <div id="tScrollBody" style="height: 255px;">
                        <table id="tblScroll" class="table table-bordered table-condensed table-fixed" style="min-width: 100%; table-layout: fixed; border: none">
                            @*<tbody id="WP02005_TBL_ADD_INCIDENT" style="display: none;">
                                <tr>
                                    <td style="width: 20%; padding:0!important">
                                        <input type="text" class="form-control space-input" id="WP02005_TXT_ADD_INCIDENT_TITLE" maxlength="50">
                                    </td>
                                    <td style="width: 15%; padding:0!important">
                                        <select class="form-control space-input select2 input-job" id="WP02005_DDL_ADD_INCIDENT_PIC">
                                            <option value="">- select -</option>
                                            @{
                                                if (Employee != null)
                                                {
                                                    if (Employee.Count() > 0)
                                                    {
                                                        foreach (EmployeeModel item in Employee)
                                                        {
                                                            <option style="display:none" value="@item.ID_TB_M_EMPLOYEE" code="@item.ID_TB_M_COMPANY" noanzen="@item.ANZEN_SERTIFICATE_NO" phone="@item.PHONE">@item.NAME</option>
                                                        }
                                                    }
                                                }
                                            }
                                        </select>
                                    </td>
                                    <td style="width: 15%; padding:0!important">
                                        <select class="form-control space-input select2" id="WP02005_DDL_ADD_AREA" required disabled>
                                            <option value="">- select -</option>
                                            @{
                                                if (Areas != null)
                                                {
                                                    if (Areas.Count() > 0)
                                                    {
                                                        foreach (AreaModel item in Areas)
                                                        {
                                                            <option value="@item.ID_TB_M_AREA">@item.AREA_NAME</option>
                                                        }
                                                    }
                                                }
                                            }
                                        </select>
                                    </td>
                                    <td style="width: 10%; padding:0!important">
                                        <input type="text" class="form-control space-input datepicker" id="WP02005_TXT_ADD_INCIDENT_DATE">
                                    </td>
                                    <td style="width: 10%; padding:0!important">
                                        <select id="WP02005_DDL_ADD_INCIDENT_LEVEL" class="form-control">
                                            <option value="Low">Low</option>
                                            <option value="Medium">Medium</option>
                                            <option value="High">High</option>
                                        </select>
                                    </td>
                                    <td style="width: 15%; padding:0!important">
                                        <input style="width:100%" class="form-control" type="file" id="WP02005_ADD_EVIDENCE" name="WP02005_ADD_EVIDENCE" accept="image/x-png,image/gif,image/jpeg">
                                    </td>
                                    
                                    <td style="width: 15%">
                                        <button type="button" id="WP02005_BTN_ADD_INCIDENT" onclick="addDataItem()" class="btn btn-primary btn-xs" style="width: 60px; margin-left:10px;">
                                            <i class="fa fa-save">
                                            </i>
                                        </button>
                                        <button type="button" id="WP02005_BTN_ADD_INCIDENT_CLOSE" class="btn btn-danger btn-xs" style="width: 60px"><i class="fa fa-sign-out"></i></button>
                                    </td>
                                </tr>
                            </tbody>
                            <tbody id="WP02005_TBL_EDIT_INCIDENT" style="display: none;">
                                <tr>
                                    <td style="width: 20%; padding:0!important">
                                        <input type="text" class="form-control space-input" id="WP02005_TXT_EDIT_INCIDENT_TITLE" maxlength="50">
                                    </td>
                                    <td style="width: 15%; padding:0!important">
                                        <select class="form-control space-input select2 input-job" id="WP02005_DDL_EDIT_INCIDENT_PIC">
                                            <option value="">- select -</option>
                                            @{
                                                if (Employee != null)
                                                {
                                                    if (Employee.Count() > 0)
                                                    {
                                                        foreach (EmployeeModel item in Employee)
                                                        {
                                                            <option style="display:none" value="@item.ID_TB_M_EMPLOYEE" code="@item.ID_TB_M_COMPANY" noanzen="@item.ANZEN_SERTIFICATE_NO" phone="@item.PHONE">@item.NAME</option>
                                                        }
                                                    }
                                                }
                                            }
                                        </select>
                                    </td>
                                    <td style="width: 15%; padding:0!important">
                                        <select class="form-control space-input input-project select2" id="WP02005_DDL_EDIT_AREA" required disabled>
                                            <option value="">- select -</option>
                                            @{
                                                if (Areas != null)
                                                {
                                                    if (Areas.Count() > 0)
                                                    {
                                                        foreach (AreaModel item in Areas)
                                                        {
                                                            <option value="@item.ID_TB_M_AREA">@item.AREA_NAME</option>
                                                        }
                                                    }
                                                }
                                            }
                                        </select>
                                    </td>
                                    <td style="width: 10%; padding:0!important">
                                        <input type="text" class="form-control space-input datepicker" id="WP02005_TXT_EDIT_INCIDENT_DATE">
                                    </td>
                                    <td style="width: 10%; padding:0!important">
                                        <select id="WP02005_DDL_EDIT_INCIDENT_LEVEL" class="form-control">
                                            <option value="Low">Low</option>
                                            <option value="Medium">Medium</option>
                                            <option value="High">High</option>
                                        </select>
                                    </td>
                                    <td style="width: 15%; padding:0!important">
                                        <input style="width:100%" class="form-control" type="file" id="WP02005_EDIT_EVIDENCE" name="WP02005_EDIT_EVIDENCE" accept="image/x-png,image/gif,image/jpeg">
                                    </td>
                                    <td style="width: 15%">
                                        <button type="button" id="WP02005_BTN_EDIT_INCIDENT" onclick="addDataItem()" class="btn btn-primary btn-xs" style="width: 60px; margin-left:10px;">
                                            <i class="fa fa-save">
                                            </i>
                                        </button>
                                        <button type="button" id="WP02005_BTN_EDIT_INCIDENT_CLOSE" class="btn btn-danger btn-xs" style="width: 60px"><i class="fa fa-sign-out"></i></button>
                                    </td>
                                </tr>
                            </tbody>*@
                            <tbody id="WP02005_TBL_LIST_INCIDENT">
                            </tbody>
                        </table>
                    </div>

                </div>
            </div>
        </div>
    </div>
<input type="text" style="display:none" id="CurrentIncidentID" value="0" />
<input type="text" style="display:none" id="CurrentIncidentFile" value="0" />