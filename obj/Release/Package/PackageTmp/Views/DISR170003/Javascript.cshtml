
<script>
    var GET_SITE_URL = (window.location.href).split('/');
    var SITE_URL = "";
    var Message = [];
    var scanQR = "";
    var HealtyCheck = false;
    var HealtyMessage = '';
    for (var i = 0; i < GET_SITE_URL.length; i++) {
        if (GET_SITE_URL[i] != "WPMember") {
            SITE_URL = SITE_URL + GET_SITE_URL[i] + "/";
        }
    }
    //Get Message From TB_M_MESSAGE
    $.ajax({
        url: "Message/GenerateMessage",
        success: function (e) {
            Message = e.res;
        },
        error: function (e) {
            toastr.error('Generate Message Error, Not Instance to the Object');
        }
    });


    $(document).ready(function () {
        //$('.menu-panel').click(function (e) {
        //    var getMenu = $(this).attr('data-target');
        //    (getMenu == "DASHBOARD") ? DASHBOARD() : (getMenu == "SCAN") ? SCAN() : DATA();

        //    $.ajax({
        //        url: SITE_URL + 'HealtyCheck',
        //        dataType: 'JSON',
        //        async: false,
        //        success: function (e) {
        //            if (e.data.length > 0) {
        //                HealtyCheck = true;
        //                HealtyMessage = e.data[0].MESSAGE_TEXT;
        //            }
        //        }
        //    });
        //});

        $('#data-container').show();

        //$('.button-back').click(function () {
        //    $('#menu-container').show();
        //    $('#scan-container').hide();
        //    $('#data-container').hide();
        //});

        getTableLossTimePerHalte();
    });

    //Generate Message
    function GenerateMessage(M, Text) {
        for (var i = 0; i < Message.length; i++) {
            var MSG_ID = Message[i].MSG_ID;
            var MSG_TXT = (Message[i].MSG_TEXT).split('{0}');

            if (MSG_ID == M) {
                var NEW_TXT = "";
                for (var e = 0; e < MSG_TXT.length; e++) {
                    if (e < (MSG_TXT.length - 1)) {
                        NEW_TXT = NEW_TXT + MSG_TXT[e] + " " + M;
                    } else {
                        NEW_TXT = NEW_TXT + " " + MSG_TXT[e];
                    }
                }
                return NEW_TXT;
            }
        }
    }

    //function DATA() {
    //    $('#menu-container').hide();
    //    $('#data-container').show();
    //}


    $(function () {
        setTimeout(startRefresh, 60000);
    });

    function startRefresh() {
        $.get('#tabel-contractor', function (data) {
            $(document.body).html(data);
        });
    }


    function getTableLossTimePerHalte() {
        
        var MDATE = localStorage.getItem('searchMDate') || $('#searchMDate').val();

        $('#searchMDate').val(MDATE).change(function () {
            var val = $(this).val();
            localStorage.setItem('searchMDate', val);
        });

        console.log(MDATE);

        (function () {

            var val = console.log(MDATE);
            var logger = document.getElementById('log');

            const monthNames = ["", "JANUARI", "FEBRUARI", "MARET", "APRIL", "MEI", "JUNI",
                "JULI", "AGUSTUS", "SEPTEMBER", "OKTOBER", "NOVEMBER", "DESEMBER"
            ];

            //ambil format bulan saja
            var bulan = MDATE.substring(4);
            //ambil format tahun saja
            var tahun = MDATE.substring(0, 4);
            //menghilangkan 0 didepan
            const withoutLeading0 = parseInt(bulan, 10);

            var month = monthNames[withoutLeading0];

            logger.innerHTML = month + '-' + tahun;

            console.log(month);

        })();

        $('#tabel-contractor').DataTable().destroy();
        
        var table = $('#tabel-contractor').DataTable({            
            //searching: false, paging: false, info: false,  
            //"order": [[0, "asc"]],
            "oLanguage": {

                "sSearch": "Quick Search:"

            },
            ajax: {
                url: SITE_URL + 'GetLossTimePerHalte',
                method: 'POST',
                data: {
                    MDATE: MDATE
                },
                global: false
            },

            aLengthMenu: [
                [50, 100, 200, -1],
                [50, 100, 200, "All"]
            ],

            columns: [
                { data: 'HALTE', name: 'HALTE'},
                { data: 'HARI_01', name: 'HARI_01' },
                { data: 'HARI_02', name: 'HARI_02' },
                { data: 'HARI_03', name: 'HARI_03' },
                { data: 'HARI_04', name: 'HARI_04' },
                { data: 'HARI_05', name: 'HARI_05' },
                { data: 'HARI_06', name: 'HARI_06' },
                { data: 'HARI_07', name: 'HARI_07' },
                { data: 'HARI_08', name: 'HARI_08' },
                { data: 'HARI_09', name: 'HARI_09' },
                { data: 'HARI_10', name: 'HARI_10' },
                { data: 'HARI_11', name: 'HARI_11' },
                { data: 'HARI_12', name: 'HARI_12' },
                { data: 'HARI_13', name: 'HARI_13' },
                { data: 'HARI_14', name: 'HARI_14' },
                { data: 'HARI_15', name: 'HARI_15' },
                { data: 'HARI_16', name: 'HARI_16' },
                { data: 'HARI_17', name: 'HARI_17' },
                { data: 'HARI_18', name: 'HARI_18' },
                { data: 'HARI_19', name: 'HARI_19' },
                { data: 'HARI_20', name: 'HARI_20' },
                { data: 'HARI_21', name: 'HARI_21' },
                { data: 'HARI_22', name: 'HARI_22' },
                { data: 'HARI_23', name: 'HARI_23' },
                { data: 'HARI_24', name: 'HARI_24' },
                { data: 'HARI_25', name: 'HARI_25' },
                { data: 'HARI_26', name: 'HARI_26' },
                { data: 'HARI_27', name: 'HARI_27' },
                { data: 'HARI_28', name: 'HARI_28' },
                { data: 'HARI_29', name: 'HARI_29' },
                { data: 'HARI_30', name: 'HARI_30' },
                { data: 'HARI_31', name: 'HARI_31' },

                
            ],            
            data: table,
            //"createdRow": function (row, data) {

            //    if (data.HARI_01 > 0 && data.HARI_01 <= 5) {
            //        $('td', row).eq(1).addClass('highlight-red');
            //    } else if (data.HARI_01 > 5 && data.HARI_01 <= 10) {
            //        $('td', row).eq(1).addClass('highlight-yellow');
            //    } else if (data.HARI_01 > 10 && data.HARI_01 <= 15) {
            //        $('td', row).eq(1).addClass('highlight-green');
            //    } else if (data.HARI_01 > 15) {
            //        $('td', row).eq(1).addClass('highlight-blue');
            //    }

            //    if (data.HARI_02 > 0 && data.HARI_02 <= 5) {
            //        $('td', row).eq(2).addClass('highlight-red');
            //    } else if (data.HARI_02 > 5 && data.HARI_02 <= 10) {
            //        $('td', row).eq(2).addClass('highlight-yellow');
            //    } else if (data.HARI_02 > 10 && data.HARI_02 <= 15) {
            //        $('td', row).eq(2).addClass('highlight-green');
            //    } else if (data.HARI_02 > 15) {
            //        $('td', row).eq(2).addClass('highlight-blue');
            //    }

            //    if (data.HARI_03 > 0 && data.HARI_03 <= 5) {
            //        $('td', row).eq(3).addClass('highlight-red');
            //    } else if (data.HARI_03 > 5 && data.HARI_03 <= 10) {
            //        $('td', row).eq(3).addClass('highlight-yellow');
            //    } else if (data.HARI_03 > 10 && data.HARI_03 <= 15) {
            //        $('td', row).eq(3).addClass('highlight-green');
            //    } else if (data.HARI_03 > 15) {
            //        $('td', row).eq(3).addClass('highlight-blue');
            //    }

            //    if (data.HARI_04 > 0 && data.HARI_04 <= 5) {
            //        $('td', row).eq(4).addClass('highlight-red');
            //    } else if (data.HARI_04 > 5 && data.HARI_04 <= 10) {
            //        $('td', row).eq(4).addClass('highlight-yellow');
            //    } else if (data.HARI_04 > 10 && data.HARI_04 <= 15) {
            //        $('td', row).eq(4).addClass('highlight-green');
            //    } else if (data.HARI_04 > 15) {
            //        $('td', row).eq(4).addClass('highlight-blue');
            //    }

            //    if (data.HARI_05 > 0 && data.HARI_05 <= 5) {
            //        $('td', row).eq(5).addClass('highlight-red');
            //    } else if (data.HARI_05 > 5 && data.HARI_05 <= 10) {
            //        $('td', row).eq(5).addClass('highlight-yellow');
            //    } else if (data.HARI_05 > 10 && data.HARI_05 <= 15) {
            //        $('td', row).eq(5).addClass('highlight-green');
            //    } else if (data.HARI_05 > 15) {
            //        $('td', row).eq(5).addClass('highlight-blue');
            //    }

            //    if (data.HARI_06 > 0 && data.HARI_06 <= 5) {
            //        $('td', row).eq(6).addClass('highlight-red');
            //    } else if (data.HARI_06 > 5 && data.HARI_06 <= 10) {
            //        $('td', row).eq(6).addClass('highlight-yellow');
            //    } else if (data.HARI_06 > 10 && data.HARI_06 <= 15) {
            //        $('td', row).eq(6).addClass('highlight-green');
            //    } else if (data.HARI_06 > 15) {
            //        $('td', row).eq(6).addClass('highlight-blue');
            //    }

            //    if (data.HARI_07 > 0 && data.HARI_07 <= 5) {
            //        $('td', row).eq(7).addClass('highlight-red');
            //    } else if (data.HARI_07 > 5 && data.HARI_07 <= 10) {
            //        $('td', row).eq(7).addClass('highlight-yellow');
            //    } else if (data.HARI_07 > 10 && data.HARI_07 <= 15) {
            //        $('td', row).eq(7).addClass('highlight-green');
            //    } else if (data.HARI_07 > 15) {
            //        $('td', row).eq(7).addClass('highlight-blue');
            //    }

            //    if (data.HARI_08 > 0 && data.HARI_08 <= 5) {
            //        $('td', row).eq(8).addClass('highlight-red');
            //    } else if (data.HARI_08 > 5 && data.HARI_08 <= 10) {
            //        $('td', row).eq(8).addClass('highlight-yellow');
            //    } else if (data.HARI_08 > 10 && data.HARI_08 <= 15) {
            //        $('td', row).eq(8).addClass('highlight-green');
            //    } else if (data.HARI_08 > 15) {
            //        $('td', row).eq(8).addClass('highlight-blue');
            //    }

            //    if (data.HARI_09 > 0 && data.HARI_09 <= 5) {
            //        $('td', row).eq(9).addClass('highlight-red');
            //    } else if (data.HARI_09 > 5 && data.HARI_09 <= 10) {
            //        $('td', row).eq(9).addClass('highlight-yellow');
            //    } else if (data.HARI_09 > 10 && data.HARI_09 <= 15) {
            //        $('td', row).eq(9).addClass('highlight-green');
            //    } else if (data.HARI_09 > 15) {
            //        $('td', row).eq(9).addClass('highlight-blue');
            //    }

            //    if (data.HARI_10 > 0 && data.HARI_10 <= 5) {
            //        $('td', row).eq(10).addClass('highlight-red');
            //    } else if (data.HARI_10 > 5 && data.HARI_10 <= 10) {
            //        $('td', row).eq(10).addClass('highlight-yellow');
            //    } else if (data.HARI_10 > 10 && data.HARI_10 <= 15) {
            //        $('td', row).eq(10).addClass('highlight-green');
            //    } else if (data.HARI_10 > 15) {
            //        $('td', row).eq(10).addClass('highlight-blue');
            //    }

            //    if (data.HARI_11 > 0 && data.HARI_11 <= 5) {
            //        $('td', row).eq(11).addClass('highlight-red');
            //    } else if (data.HARI_11 > 5 && data.HARI_11 <= 10) {
            //        $('td', row).eq(11).addClass('highlight-yellow');
            //    } else if (data.HARI_11 > 10 && data.HARI_11 <= 15) {
            //        $('td', row).eq(11).addClass('highlight-green');
            //    } else if (data.HARI_11 > 15) {
            //        $('td', row).eq(11).addClass('highlight-blue');
            //    }

            //    if (data.HARI_12 > 0 && data.HARI_12 <= 5) {
            //        $('td', row).eq(12).addClass('highlight-red');
            //    } else if (data.HARI_12 > 5 && data.HARI_12 <= 10) {
            //        $('td', row).eq(12).addClass('highlight-yellow');
            //    } else if (data.HARI_12 > 10 && data.HARI_12 <= 15) {
            //        $('td', row).eq(12).addClass('highlight-green');
            //    } else if (data.HARI_12 > 15) {
            //        $('td', row).eq(12).addClass('highlight-blue');
            //    }

            //    if (data.HARI_13 > 0 && data.HARI_13 <= 5) {
            //        $('td', row).eq(13).addClass('highlight-red');
            //    } else if (data.HARI_13 > 5 && data.HARI_13 <= 10) {
            //        $('td', row).eq(13).addClass('highlight-yellow');
            //    } else if (data.HARI_13 > 10 && data.HARI_13 <= 15) {
            //        $('td', row).eq(13).addClass('highlight-green');
            //    } else if (data.HARI_13 > 15) {
            //        $('td', row).eq(13).addClass('highlight-blue');
            //    }

            //    if (data.HARI_14 > 0 && data.HARI_14 <= 5) {
            //        $('td', row).eq(14).addClass('highlight-red');
            //    } else if (data.HARI_14 > 5 && data.HARI_14 <= 10) {
            //        $('td', row).eq(14).addClass('highlight-yellow');
            //    } else if (data.HARI_14 > 10 && data.HARI_14 <= 15) {
            //        $('td', row).eq(14).addClass('highlight-green');
            //    } else if (data.HARI_14 > 15) {
            //        $('td', row).eq(14).addClass('highlight-blue');
            //    }

            //    if (data.HARI_15 > 0 && data.HARI_15 <= 5) {
            //        $('td', row).eq(15).addClass('highlight-red');
            //    } else if (data.HARI_15 > 5 && data.HARI_15 <= 10) {
            //        $('td', row).eq(15).addClass('highlight-yellow');
            //    } else if (data.HARI_15 > 10 && data.HARI_15 <= 15) {
            //        $('td', row).eq(15).addClass('highlight-green');
            //    } else if (data.HARI_15 > 15) {
            //        $('td', row).eq(15).addClass('highlight-blue');
            //    }

            //    if (data.HARI_16 > 0 && data.HARI_16 <= 5) {
            //        $('td', row).eq(16).addClass('highlight-red');
            //    } else if (data.HARI_16 > 5 && data.HARI_16 <= 10) {
            //        $('td', row).eq(16).addClass('highlight-yellow');
            //    } else if (data.HARI_16 > 10 && data.HARI_16 <= 15) {
            //        $('td', row).eq(16).addClass('highlight-green');
            //    } else if (data.HARI_16 > 15) {
            //        $('td', row).eq(16).addClass('highlight-blue');
            //    }

            //    if (data.HARI_17 > 0 && data.HARI_17 <= 5) {
            //        $('td', row).eq(17).addClass('highlight-red');
            //    } else if (data.HARI_17 > 5 && data.HARI_17 <= 10) {
            //        $('td', row).eq(17).addClass('highlight-yellow');
            //    } else if (data.HARI_17 > 10 && data.HARI_17 <= 15) {
            //        $('td', row).eq(17).addClass('highlight-green');
            //    } else if (data.HARI_17 > 15) {
            //        $('td', row).eq(17).addClass('highlight-blue');
            //    }

            //    if (data.HARI_18 > 0 && data.HARI_18 <= 5) {
            //        $('td', row).eq(18).addClass('highlight-red');
            //    } else if (data.HARI_18 > 5 && data.HARI_18 <= 10) {
            //        $('td', row).eq(18).addClass('highlight-yellow');
            //    } else if (data.HARI_18 > 10 && data.HARI_18 <= 15) {
            //        $('td', row).eq(18).addClass('highlight-green');
            //    } else if (data.HARI_18 > 15) {
            //        $('td', row).eq(18).addClass('highlight-blue');
            //    }

            //    if (data.HARI_19 > 0 && data.HARI_19 <= 5) {
            //        $('td', row).eq(19).addClass('highlight-red');
            //    } else if (data.HARI_19 > 5 && data.HARI_19 <= 10) {
            //        $('td', row).eq(19).addClass('highlight-yellow');
            //    } else if (data.HARI_19 > 10 && data.HARI_19 <= 15) {
            //        $('td', row).eq(19).addClass('highlight-green');
            //    } else if (data.HARI_19 > 15) {
            //        $('td', row).eq(19).addClass('highlight-blue');
            //    }

            //    if (data.HARI_20 > 0 && data.HARI_20 <= 5) {
            //        $('td', row).eq(20).addClass('highlight-red');
            //    } else if (data.HARI_20 > 5 && data.HARI_20 <= 10) {
            //        $('td', row).eq(20).addClass('highlight-yellow');
            //    } else if (data.HARI_20 > 10 && data.HARI_20 <= 15) {
            //        $('td', row).eq(20).addClass('highlight-green');
            //    } else if (data.HARI_20 > 15) {
            //        $('td', row).eq(20).addClass('highlight-blue');
            //    }

            //    if (data.HARI_21 > 0 && data.HARI_21 <= 5) {
            //        $('td', row).eq(21).addClass('highlight-red');
            //    } else if (data.HARI_21 > 5 && data.HARI_21 <= 10) {
            //        $('td', row).eq(21).addClass('highlight-yellow');
            //    } else if (data.HARI_21 > 10 && data.HARI_21 <= 15) {
            //        $('td', row).eq(21).addClass('highlight-green');
            //    } else if (data.HARI_21 > 15) {
            //        $('td', row).eq(21).addClass('highlight-blue');
            //    }

            //    if (data.HARI_22 > 0 && data.HARI_22 <= 5) {
            //        $('td', row).eq(22).addClass('highlight-red');
            //    } else if (data.HARI_22 > 5 && data.HARI_22 <= 10) {
            //        $('td', row).eq(22).addClass('highlight-yellow');
            //    } else if (data.HARI_22 > 10 && data.HARI_22 <= 15) {
            //        $('td', row).eq(22).addClass('highlight-green');
            //    } else if (data.HARI_22 > 15) {
            //        $('td', row).eq(22).addClass('highlight-blue');
            //    }

            //    if (data.HARI_23 > 0 && data.HARI_23 <= 5) {
            //        $('td', row).eq(23).addClass('highlight-red');
            //    } else if (data.HARI_23 > 5 && data.HARI_23 <= 10) {
            //        $('td', row).eq(23).addClass('highlight-yellow');
            //    } else if (data.HARI_23 > 10 && data.HARI_23 <= 15) {
            //        $('td', row).eq(23).addClass('highlight-green');
            //    } else if (data.HARI_23 > 15) {
            //        $('td', row).eq(23).addClass('highlight-blue');
            //    }

            //    if (data.HARI_24 > 0 && data.HARI_24 <= 5) {
            //        $('td', row).eq(24).addClass('highlight-red');
            //    } else if (data.HARI_24 > 5 && data.HARI_24 <= 10) {
            //        $('td', row).eq(24).addClass('highlight-yellow');
            //    } else if (data.HARI_24 > 10 && data.HARI_24 <= 15) {
            //        $('td', row).eq(24).addClass('highlight-green');
            //    } else if (data.HARI_24 > 15) {
            //        $('td', row).eq(24).addClass('highlight-blue');
            //    }

            //    if (data.HARI_25 > 0 && data.HARI_25 <= 5) {
            //        $('td', row).eq(25).addClass('highlight-red');
            //    } else if (data.HARI_25 > 5 && data.HARI_25 <= 10) {
            //        $('td', row).eq(25).addClass('highlight-yellow');
            //    } else if (data.HARI_25 > 10 && data.HARI_25 <= 15) {
            //        $('td', row).eq(25).addClass('highlight-green');
            //    } else if (data.HARI_25 > 15) {
            //        $('td', row).eq(25).addClass('highlight-blue');
            //    }

            //    if (data.HARI_26 > 0 && data.HARI_26 <= 5) {
            //        $('td', row).eq(26).addClass('highlight-red');
            //    } else if (data.HARI_26 > 5 && data.HARI_26 <= 10) {
            //        $('td', row).eq(26).addClass('highlight-yellow');
            //    } else if (data.HARI_26 >= 26 && data.HARI_26 <= 15) {
            //        $('td', row).eq(26).addClass('highlight-green');
            //    } else if (data.HARI_26 > 15) {
            //        $('td', row).eq(26).addClass('highlight-blue');
            //    }

            //    if (data.HARI_27 > 0 && data.HARI_27 <= 5) {
            //        $('td', row).eq(27).addClass('highlight-red');
            //    } else if (data.HARI_27 > 5 && data.HARI_27 <= 10) {
            //        $('td', row).eq(27).addClass('highlight-yellow');
            //    } else if (data.HARI_27 > 10 && data.HARI_27 <= 15) {
            //        $('td', row).eq(27).addClass('highlight-green');
            //    } else if (data.HARI_27 > 15) {
            //        $('td', row).eq(27).addClass('highlight-blue');
            //    }

            //    if (data.HARI_28 > 0 && data.HARI_28 <= 5) {
            //        $('td', row).eq(28).addClass('highlight-red');
            //    } else if (data.HARI_28 > 5 && data.HARI_28 <= 10) {
            //        $('td', row).eq(28).addClass('highlight-yellow');
            //    } else if (data.HARI_28 > 10 && data.HARI_28 <= 15) {
            //        $('td', row).eq(28).addClass('highlight-green');
            //    } else if (data.HARI_28 > 15) {
            //        $('td', row).eq(28).addClass('highlight-blue');
            //    }

            //    if (data.HARI_29 > 0 && data.HARI_29 <= 5) {
            //        $('td', row).eq(29).addClass('highlight-red');
            //    } else if (data.HARI_29 > 5 && data.HARI_29 <= 10) {
            //        $('td', row).eq(29).addClass('highlight-yellow');
            //    } else if (data.HARI_29 > 10 && data.HARI_29 <= 15) {
            //        $('td', row).eq(29).addClass('highlight-green');
            //    } else if (data.HARI_29 > 15) {
            //        $('td', row).eq(29).addClass('highlight-blue');
            //    }

            //    if (data.HARI_30 > 0 && data.HARI_30 <= 5) {
            //        $('td', row).eq(30).addClass('highlight-red');
            //    } else if (data.HARI_30 > 5 && data.HARI_30 <= 10) {
            //        $('td', row).eq(30).addClass('highlight-yellow');
            //    } else if (data.HARI_30 > 10 && data.HARI_30 <= 30) {
            //        $('td', row).eq(30).addClass('highlight-green');
            //    } else if (data.HARI_30 > 15) {
            //        $('td', row).eq(30).addClass('highlight-blue');
            //    }

            //    if (data.HARI_31 > 0 && data.HARI_31 <= 5) {
            //        $('td', row).eq(31).addClass('highlight-red');
            //    } else if (data.HARI_31 > 5 && data.HARI_31 <= 10) {
            //        $('td', row).eq(31).addClass('highlight-yellow');
            //    } else if (data.HARI_31 > 10 && data.HARI_31 <= 31) {
            //        $('td', row).eq(31).addClass('highlight-green');
            //    } else if (data.HARI_31 > 15) {
            //        $('td', row).eq(31).addClass('highlight-blue');
            //    }
            //},            
        });        
    }

  
  

    //$('#tabel-contractor').DataTable().destroy();

    function printEXCEL() {        
        var MDATE = $('#searchMDate').val();

        window.open(
            'DISR170003/PrintExcel?MDATE=' + MDATE + '',
            '_blank'
        );
    }



</script>

