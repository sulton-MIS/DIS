SELECT	TOP 1 
		B.REG_NO AS NOREG,
		A.ROLE AS AuthID,
		(SELECT TOP 1 ROLE_NAME FROM TB_M_ROLE WHERE ID_TB_M_ROLE = A.Role) AS AuthName,
		A.USERNAME	AS USERNAME,
		B.EMAIL,
		B.FIRST_NAME AS First_Name,
		B.LAST_NAME AS Last_Name,
		B.PHONE,
		(CASE WHEN B.GENDER = 'MALE' THEN 0 ELSE 1 END) AS GENDER,
		B.BIRTH_DATE,
		B.ADDRESS,
		B.IDENTITY_TYPE,
		B.IDENTITY_NO,
		B.PIC_STATUS,
		B.ID_TB_M_COMPANY AS COMPANY_ID,
		(SELECT TOP 1 COMPANY_CODE FROM TB_M_COMPANY  WHERE ID_TB_M_COMPANY = B.ID_TB_M_COMPANY ) AS COMPANY_CODE,
		B.SECTION,
		(SELECT TOP 1 AREA_NAME FROM TB_M_AREA  WHERE ID_TB_M_AREA = A.ID_TB_M_AREA ) AS AREA_NAME,
		(SELECT TOP 1 LOC_NAME FROM TB_M_LOCATION  WHERE ID_TB_M_LOCATION = A.ID_TB_M_LOCATION ) AS LOCATIONNAME,
		'PLANT 3' AS PlantName,
		A.ID_TB_M_AREA AS AREA,
		(SELECT TOP 1 COMPANY_NAME FROM TB_M_COMPANY  WHERE ID_TB_M_COMPANY = B.ID_TB_M_COMPANY ) AS COMPANY
FROM	dbo.TB_M_USER_MAPPING AS A
LEFT JOIN TB_M_EMPLOYEE AS B ON A.USERNAME = B.USERNAME
WHERE	A.USERNAME = (CASE WHEN ISNUMERIC(@Username) = 1 THEN ''+@Username+'' ELSE @Username END )
